using VectorStudyCase.src;
using NUnit.Framework;
using System.Diagnostics;
using VectorStudyCase.src.Features;
using VectorStudyCase.src.Interfaces;

namespace TestProject
{
    public class Tests
    {

        //specify type of data that is used by my search engine
        public SearchEngine<string> MySearchEngine { get; private set;}

        //specify which type of data i will traverse
        public List<IStartWithFeature<string>> MyInputList { get; private set; }

        public List<IStartWithFeature<string>> AutogeneratedInoutTestList { get; private set; }

        private Stopwatch? _stopWatch;

        [SetUp]
        public void Setup()
        {

            MySearchEngine = new SearchEngine<string>();

            //specify and fill with concrete stringsearchedstructure elements in list
            MyInputList = new List<IStartWithFeature<string>> { new StringSearchedFeature("AAAA"), new StringSearchedFeature("ACZM"), new StringSearchedFeature("ANDY"), new StringSearchedFeature("AAAA"), new StringSearchedFeature("ACZM"), new StringSearchedFeature("ANDY") };


            AutogeneratedInoutTestList = new List<IStartWithFeature<string>>();
            for (char firstLetter = 'A'; firstLetter <= 'Z'; firstLetter++)
            {
                for (char secondLetter = 'A'; secondLetter <= 'Z'; secondLetter++)
                {
                    for (char thirdLetter = 'A'; thirdLetter <= 'Z'; thirdLetter++)
                    {
                        for (char fourthLetter = 'A'; fourthLetter <= 'Z'; fourthLetter++)
                        {
                            string combination = $"{firstLetter}{secondLetter}{thirdLetter}{fourthLetter}";
                            AutogeneratedInoutTestList.Add(new StringSearchedFeature(combination));
                        }
                    }
                }
            }
        }

        [Test]
        public void Test1()
        {
            var testResults = MySearchEngine.SearchForPattern(MyInputList, new StringSearchedFeature("AN"));
            testResults.ForEach(x => Console.WriteLine(x));
            Assert.IsTrue(testResults.Count == 2 && testResults.Contains("ANDY"));
        }

        [Test]
        public void Test2()
        {
            _stopWatch = Stopwatch.StartNew();
            var ReturnData = MySearchEngine.SearchForPattern(MyInputList, new StringSearchedFeature("AN"));
            _stopWatch.Stop();

            ReturnData.ForEach(x => Console.WriteLine(x));

            Console.WriteLine($"elapsed time iin microseconds taken here is {_stopWatch.ElapsedTicks / 10.0}");

            Assert.IsTrue(ReturnData.Count == 2 && ReturnData.Contains("ANDY"));
        }

        [Test]
        public void Test3()
        {
            _stopWatch = Stopwatch.StartNew();
            var ReturnData = MySearchEngine.SearchForPattern(MyInputList, new StringSearchedFeature("MH"));
            _stopWatch.Stop();
            ReturnData.ForEach(x => Console.WriteLine(x));

            Console.WriteLine($"elapsed time iin microseconds taken here is {_stopWatch.ElapsedTicks / 10.0}");

            Assert.IsFalse(ReturnData.Count == 2 && ReturnData.Contains("ANDY"));
        }

        [Test]
        public void Test4()
        {
            MyInputList = new();
            _stopWatch = Stopwatch.StartNew();
            var ReturnData = MySearchEngine.SearchForPattern(MyInputList, new StringSearchedFeature("MH"));
            _stopWatch.Stop();
            ReturnData.ForEach(x => Console.WriteLine(x));

            Console.WriteLine($"elapsed time iin microseconds taken here is {_stopWatch.ElapsedTicks / 10.0}");

            Assert.IsFalse(ReturnData.Count == 2 && ReturnData.Contains("ANDY"));
        }


        [Test]
        public void Test5()
        {
            Random random = new Random();
            int randomIndex = random.Next(0, AutogeneratedInoutTestList.Count);
            var randomElement = AutogeneratedInoutTestList[randomIndex];

            _stopWatch = Stopwatch.StartNew();
            var testResults = MySearchEngine.SearchForPattern(AutogeneratedInoutTestList, randomElement);
            _stopWatch.Stop();

            testResults.ForEach(x => Console.WriteLine(x));
            Console.WriteLine($"elapsed time iin microseconds taken here is {_stopWatch.ElapsedTicks / 10.0}");

            Assert.IsTrue(testResults.Count == 1 && testResults.Contains(randomElement.Data!));

        }


    }
}